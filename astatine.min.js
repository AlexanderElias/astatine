/*
	Version 1.0.4
	Alexander Elias
	Licensed Under MPL 2.0
	Copyright 2016 Alexander Elias
	https://github.com/AlexanderElias/astatine
*/
(function(){function k(a){if(!a)throw Error("ajax: requires options");a.action||(a.action=window.location.pathname);a.enctype||(a.enctype="text/plain");a.method=a.method?a.method.toUpperCase():"GET";a.data&&("GET"===a.method?(a.action=a.action+"?"+g(a.data),a.data=null):-1!==a.enctype.search("application/x-www-form-urlencoded")?a.data=g(a.data):-1!==a.enctype.search("application/json")&&(a.data=JSON.stringify(a.data)));var b=new XMLHttpRequest;b.open(a.method,a.action,!0,a.username,a.password);a.h&&
b.overrideMimeType(a.h);a.withCredentials&&(b.withCredentials=a.withCredentials);if(a.headers)for(var d in a.headers)b.setRequestHeader(d,a.headers[d]);b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){if(a.a)return a.a(b)}else if(a.error)return a.error(b)};b.send(a.data)}function g(a){var b="",d;for(d in a)b=0<b.length?b+"&":b,b=b+encodeURIComponent(d)+"="+encodeURIComponent(a[d]);return b}function m(a){a=a.querySelectorAll("input, textarea");for(var b={},d=0,e=
a.length;d<e;d++){var f=a[d],l=f.name,h=f.type,g=f.value,k=f.checked,f=f.disabled;l&&!f&&"submit"!==h&&"reset"!==h&&"button"!==h&&"file"!==h&&("checkbox"===h?b[l]=k:"radio"===h?k&&(b[l]=g):b[l]=g)}return b}function n(a,b){var d=document.querySelector(a),e=document.createElement("div");e.classList.add("spinner");d.appendChild(e);d.addEventListener("submit",function(a){a.preventDefault();a=a.target;return b(a,a.querySelector("[type=submit]"),e)})}window.c={j:{l:{size:"3px",b:"15px",g:"darkgray",f:"lightgray"}},
m:k,submit:function(a){if(!a)throw Error("submit: missing options");if(!a.query)throw Error("submit: missing options.query");n(a.query,function(b,d,e){e&&(e.style.display="block");d&&(d.style.display="none");a.data=a.data||m(b);a.action=a.action||b.getAttribute("action");a.method=a.method||b.getAttribute("method");a.enctype=a.enctype||b.getAttribute("enctype");a.headers=a.headers||{"Content-Type":a.enctype};a.i&&a.i(a.data);a.a=function(f){e&&(e.style.display="none");d&&(d.style.display="block");
b.reset();if(a.complete)return a.complete(null,f)};a.error=function(b){e&&(e.style.display="none");d&&(d.style.display="block");a.data=null;if(a.complete)return a.complete(b,null)};k(a)})},formData:m,o:g};document.addEventListener("load",function(){var a=document.createElement("style"),b=window.c.j.l;a.innerText=".spinner {margin: auto;display: none;width: "+b.b+";height: "+b.b+";border: "+b.size+" solid "+b.f+";border-top: "+b.size+" solid "+b.g+";border-radius: 50%;animation: spin 2s linear infinite;-o-animation: spin 2s linear infinite;-moz-animation: spin 2s linear infinite;-webkit-animation: spin 2s linear infinite; }@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }@-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(360deg); } }@-moz-keyframes spin { 0% { -moz-transform: rotate(0deg); } 100% { -moz-transform: rotate(360deg); } }@-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); } }";
document.head.appendChild(a)})})();
